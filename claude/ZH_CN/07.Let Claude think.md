# 让 Claude 思考（思维链提示）以提高性能

https://docs.claude.com/en/docs/build-with-claude/prompt-engineering/chain-of-thought

虽然这些技巧普遍适用于所有 Claude 模型，但您可以在[此处](./13.extended-thinking-tips.md)找到针对扩展思维模型的特定提示技巧。

当面临研究、分析或解决问题等复杂任务时，给 Claude 思考的空间可以显著提高其性能。这种技术，被称为思维链（CoT）提示，鼓励 Claude 逐步分解问题，从而产生更准确、更细致的输出。

## 在实施 CoT 之前

### 为什么要让 Claude 思考？

* **准确性：** 逐步解决问题可以减少错误，尤其是在数学、逻辑、分析或通常复杂的任务中。
* **连贯性：** 结构化思考可以产生更具凝聚力、组织更严谨的响应。
* **调试：** 查看 Claude 的思考过程有助于您找出提示中可能不清楚的地方。

### 为什么不让 Claude 思考？

* 增加的输出长度可能会影响延迟。
* 并非所有任务都需要深入思考。请审慎使用 CoT，以确保性能和延迟之间的适当平衡。

>  对于人类需要思考才能完成的任务，例如复杂的数学、多步分析、撰写复杂文档或涉及多因素的决策，请使用 CoT。

***

## 如何提示进行思考

下面的思维链技术**按从最简单到最复杂的顺序排列**。较简单的方法在上下文窗口中占用的空间较少，但通常功能也较弱。

>  **CoT 技巧**：始终让 Claude 输出其思考过程。如果不输出其思考过程，就不会发生思考！

**基本提示**：在您的提示中包含“一步一步地思考”。

缺乏关于*如何*思考的指导（如果任务非常特定于您的应用、用例或组织，这尤其不理想）

**示例：撰写捐赠者邮件（基本 CoT）**

| 角色 | 内容 |
| --- | --- |
| 用户 | 为今年的“关爱儿童”项目起草个性化的捐赠者邮件，请求他们捐款。<br /><br />项目信息：<br /><program>\{\{PROGRAM_DETAILS}}<br /></program><br /><br />捐赠者信息：<br /><donor>\{\{DONOR_DETAILS}}<br /></donor><br /><br />在写邮件之前，请一步一步地思考。 |

**引导式提示**：概述 Claude 在其思考过程中应遵循的具体步骤。

缺乏结构化，难以将答案与思考过程分离开来。

**示例：撰写捐赠者邮件（引导式 CoT）**

| 角色 | 内容 |
| --- | --- |
| 用户 | 为今年的“关爱儿童”项目起草个性化的捐赠者邮件，请求他们捐款。<br /><br />项目信息：<br /><program>\{\{PROGRAM_DETAILS}}<br /></program><br /><br />捐赠者信息：<br /><donor>\{\{DONOR_DETAILS}}<br /></donor><br /><br />在写邮件之前请先思考。首先，根据该捐赠者的捐赠历史和他们过去支持过的活动，思考什么样的信息可能会吸引他们。然后，根据他们的历史，思考“关爱儿童”项目的哪些方面会吸引他们。最后，利用你的分析撰写个性化的捐赠者邮件。 |

**结构化提示**：使用像 `<thinking>` 和 `<answer>` 这样的 XML 标签来将推理与最终答案分开。

**示例：撰写捐赠者邮件（结构化引导式 CoT）**

| 角色 | 内容 |
| --- | --- |
| 用户 | 为今年的“关爱儿童”项目起草个性化的捐赠者邮件，请求他们捐款。<br /><br />项目信息：<br /><program>\{\{PROGRAM_DETAILS}}<br /></program><br /><br />捐赠者信息：<br /><donor>\{\{DONOR_DETAILS}}<br /></donor><br /><br />在写邮件之前，请在 `<thinking>` 标签中思考。首先，根据该捐赠者的捐赠历史和他们过去支持过的活动，思考什么样的信息可能会吸引他们。然后，根据他们的历史，思考“关爱儿童”项目的哪些方面会吸引他们。最后，在 `<email>` 标签中利用你的分析撰写个性化的捐赠者邮件。 |

### 示例

#### 示例：没有思考的财务分析

如果没有逐步思考，Claude 会给出一个看似合理但缺乏深度的建议。它没有量化潜在的结果，也没有考虑历史市场表现，而这些对于做出明智的决定至关重要。

| 角色 | 内容 |
| --- | --- |
| 用户 | 您是一位财务顾问。一位客户想要投资 10,000 美元。他们有两个选择：A) 一只历史上年回报率为 12% 但波动较大的股票，或 B) 一只保证年回报率为 6% 的债券。客户需要在 5 年后用这笔钱支付房子的首付。您推荐哪个选择？ |
| 助手 | 根据所提供的信息，我建议选择 B，即保证年回报率为 6% 的债券。原因如下： 1. 确定性：债券提供有保证的 6% 年回报率，这为财务规划提供了确定性。当客户有明确的财务目标（首付）和固定的时间表（5 年）时，这一点至关重要。 2. 风险规避：由于客户需要这笔钱用于重要的生活事件（买房），他们很可能有较低的风险承受能力。如果股市在他们需要资金时出现下跌，其波动性可能会危及他们的计划。 3. 时间范围：只有 5 年的时间，从潜在的股市下跌中恢复的时间较少。较长的投资期限（10 年以上）通常更适合应对股市的波动。 虽然股票 12% 的历史回报率很有吸引力，但过去的表现并不能保证未来的结果。债券保证的 6% 确保了客户在需要支付首付时能拥有所需的资金。 |

#### 示例：带有思考的财务分析

通过逐步思考，顾问提供了更丰富的分析。它计算了两种情景下的确切数字，考虑了历史市场波动，并深入分析了客户的风险承受能力。这种透彻的推理得出了一个更自信、更合理的建议。

| 角色 | 内容 |
| --- | --- |
| 用户 | 您是一位财务顾问。一位客户想要投资 10,000 美元。他们有两个选择：A) 一只历史上年回报率为 12% 但波动较大的股票，或 B) 一只保证年回报率为 6% 的债券。客户需要在 5 年后用这笔钱支付房子的首付。您推荐哪个选择？请一步一步地思考。 |
| 助手 | 为了确定最适合我们客户的投资选择，我将逐步考虑以下几个因素： <thinking> 1. 了解客户的目标和时间表： - 目标：房屋首付 - 时间表：5 年 - 含义：这是一个短期的、高优先级的财务目标。客户很可能无法承受重大的风险或波动。 2. 分析选项 A（股票）： - 优点：较高的历史回报率（年均 12%） - 缺点：波动性大（意味着可能获得显著收益或亏损） - 计算潜在的 5 年回报： - 最佳情况（年均 12%）：$10,000 * (1.12)^5 ≈ $17,623.42 - 最坏情况（市场崩盘）：可能损失很大一部分，例如，50% 的崩盘 = $5,000 3. 分析选项 B（债券）： - 优点：有保证的回报（年均 6%） - 缺点：与股票历史表现相比回报较低 - 计算 5 年回报： - 保证：$10,000 * (1.06)^5 ≈ $13,382.25 4. 考虑风险承受能力： - 目标是房屋首付（必需品，非可有可无） - 时间表短（5 年）限制了从市场低迷中恢复的能力 - 结论：客户的风险承受能力可能较低 5. 历史视角： - 股票 12% 的回报率是历史数据，不能保证 - 在 5 年的周期内，股市波动可能很大： - 2003-2007 年（金融危机前）：标准普尔 500 指数上涨约 82% - 2007-2011 年（危机期间）：标准普尔 500 指数下跌约 2% - 结论：过去的表现不能保证未来的结果，特别是短期内 6. 最终分析： - 选项 A（股票）：潜在回报更高，但无法实现首付目标的风险不可接受 - 选项 B（债券）：保证能达到最佳股票情景的约 80%，100% 确定能拥有资金 </thinking> <answer> 我推荐选项 B，即保证年回报率为 6% 的债券。虽然股票 12% 的历史回报率很诱人，但债券能确保您在 5 年后拥有 13,382.25 美元用于房屋首付。考虑到您目标的重要性和短暂的时间表，股票的波动性构成了不可接受的风险。债券提供了确定性，这对于如此重要的财务里程碑来说是无价的。 </answer> |
