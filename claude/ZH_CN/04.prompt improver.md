# 使用我们的提示改进器来优化您的提示

https://docs.claude.com/en/docs/build-with-claude/prompt-engineering/prompt-improver

我们的提示改进器与所有 Claude 模型兼容，包括那些具有扩展思维能力的模型。有关针对扩展思维模型的提示技巧，请参阅[此处](./13.extended-thinking-tips.md)。


提示改进器通过自动分析和增强，帮助您快速迭代和改进您的提示。它擅长于使提示在需要高精度的复杂任务中更加稳健。

![img](https://mintcdn.com/anthropic-claude-docs/LF5WV0SNF6oudpT5/images/prompt_improver.png?fit=max&auto=format&n=LF5WV0SNF6oudpT5&q=85&s=01479d382e45cc5cdec882d53f3bbf87)

## 开始之前

您需要：

* 一个需要改进的[提示模板](/en/docs/build-with-claude/prompt-engineering/prompt-templates-and-variables)
* 关于 Claude 当前输出问题的反馈（可选但推荐）
* 示例输入和理想输出（可选但推荐）

## 提示改进器如何工作

提示改进器通过 4 个步骤增强您的提示：

1. **示例识别**：定位并从您的提示模板中提取示例
2. **初始草稿**：创建一个带有清晰部分和 XML 标签的结构化模板
3. **思维链优化**：添加并优化详细的推理指令
4. **示例增强**：更新示例以演示新的推理过程

您可以在改进模式中实时观看这些步骤的发生。

## 您将得到什么

提示改进器生成的模板具有：

* 详细的思维链指令，指导 Claude 的推理过程，并通常提高其性能
* 使用 XML 标签清晰组织，以分隔不同的组件
* 标准化的示例格式，演示从输入到输出的逐步推理
* 引导 Claude 初始响应的策略性预填充

虽然示例在 Workbench UI 中单独显示，但在实际的 API 调用中，它们包含在第一个用户消息的开头。通过点击“**\</> 获取代码**”查看原始格式，或通过示例框将示例作为原始文本插入。

## 如何使用提示改进器

1. 提交您的提示模板
2. 添加任何关于 Claude 当前输出问题的反馈（例如，“摘要对于专家受众来说太基础了”）
3. 包括示例输入和理想输出
4. 审查改进后的提示

## 生成测试示例

还没有示例吗？使用我们的[测试用例生成器](/en/docs/test-and-evaluate/eval-tool#creating-test-cases)来：

1. 生成示例输入
2. 获取 Claude 的响应
3. 编辑响应以匹配您的理想输出
4. 将润色后的示例添加到您的提示中

## 何时使用提示改进器

提示改进器最适用于：

* 需要详细推理的复杂任务
* 准确性比速度更重要的情况
* Claude 当前输出需要显著改进的问题

对于对延迟或成本敏感的应用程序，请考虑使用更简单的提示。提示改进器创建的模板会产生更长、更详尽但响应较慢的响应。

## 改进示例

以下是提示改进器如何增强一个基本的分类提示：

#### 原始提示

  ```
从以下维基百科文章标题列表中，确定这句话来自哪篇文章。
只回答文章标题，不要有其他任何内容。

文章标题：
{{titles}}

要分类的句子：
{{sentence}}
  ```
#### 改进后的提示

  ```
您是一个智能文本分类系统，专门将句子与维基百科文章标题进行匹配。您的任务是根据提供的文章标题列表，确定给定句子最有可能属于哪篇维基百科文章。

首先，请查看以下维基百科文章标题列表：
<article_titles>
{{titles}}
</article_titles>

现在，请考虑这个需要分类的句子：
<sentence_to_classify>
{{sentence}}
</sentence_to_classify>

您的目标是确定所提供列表中的哪个文章标题与给定句子最匹配。请遵循以下步骤：

1. 列出句子中的关键概念
2. 将每个关键概念与文章标题进行比较
3. 排出前 3 个最相关的标题，并解释它们为什么相关
4. 选择最能概括或与句子内容相关的最合适的文章标题

将您的分析包裹在 <analysis> 标签中。包括以下内容：
- 句子中的关键概念列表
- 每个关键概念与文章标题的比较
- 排名前 3 位的最相关标题及其解释
- 您的最终选择和推理

在您的分析之后，提供您的最终答案：列表中最合适的单个维基百科文章标题。

仅输出所选的文章标题，不带任何附加文本或解释。
  ```
请注意改进后的提示如何：

* 添加了清晰的逐步推理指令
* 使用 XML 标签来组织内容
* 提供了明确的输出格式要求
* 引导 Claude 完成分析过程

## 故障排除

常见问题和解决方案：

* **示例未出现在输出中**：检查示例格式是否正确，带有 XML 标签，并出现在第一个用户消息的开头
* **思维链过于冗长**：添加关于期望输出长度和详细程度的特定指令
* **推理步骤与您的需求不符**：修改步骤部分以匹配您的特定用例
