# 使用 XML 标签来构建您的提示

https://docs.claude.com/en/docs/build-with-claude/prompt-engineering/use-xml-tags

虽然这些技巧普遍适用于所有 Claude 模型，但您可以在[此处](./13.extended-thinking-tips.md)找到针对扩展思维模型的特定提示技巧。

当您的提示包含多个组件，如上下文、指令和示例时，XML 标签可以改变游戏规则。它们帮助 Claude 更准确地解析您的提示，从而产生更高质量的输出。

**XML 技巧**

使用像 `<instructions>`、`<example>` 和 `<formatting>` 这样的标签来清晰地分隔提示的不同部分。这可以防止 Claude 将指令与示例或上下文混淆。

## 为什么要使用 XML 标签？

* **清晰性：** 清晰地分隔提示的不同部分，并确保您的提示结构良好。
* **准确性：** 减少因 Claude 误解提示部分而导致的错误。
* **灵活性：** 轻松查找、添加、删除或修改提示的部分，而无需重写所有内容。
* **可解析性：** 让 Claude 在其输出中使用 XML 标签，可以更容易地通过后处理提取其响应的特定部分。

Claude 并没有特别针对某些“最佳”XML 标签进行训练，但我们建议您的标签名称与它们所包围的信息相符。

***

## 标签最佳实践

1. **保持一致**：在您的提示中始终使用相同的标签名称，并在谈论内容时引用这些标签名称（例如，`使用 <contract> 标签中的合同...`）。
2. **嵌套标签**：对于分层内容，您应该嵌套标签 `<outer><inner></inner></outer>`。

**高级用户技巧**

将 XML 标签与其他技术（如多样本提示 (`<examples>`) 或思维链 (`<thinking>`, `<answer>`)）相结合。这可以创建结构超强、性能超高的提示。

### 示例

#### 示例：生成财务报告

没有 XML 标签，Claude 会误解任务，并生成不符合所需结构或语气的报告。替换后，Claude 也有可能误解一个部分（如第一季度报告示例）在哪里结束，另一个部分在哪里开始。

| 角色 | 无 XML 标签 | 有 XML 标签 |
| --- | --- | --- |
| 用户 | 您是 AcmeCorp 的财务分析师。为我们的投资者生成一份第二季度财务报告。包括收入增长、利润率和现金流等部分，就像去年的这个例子一样：{{Q1_REPORT}}。使用此电子表格中的数据点：{{SPREADSHEET_DATA}}。报告应极其简洁、切中要点、专业，并采用列表格式。它应突出优势和需要改进的领域。 | 您是 AcmeCorp 的财务分析师。为我们的投资者生成一份第二季度财务报告。 AcmeCorp 是一家 B2B SaaS 公司。我们的投资者重视透明度和可操作的见解。 为您的报告使用此数据：<data>{{SPREADSHEET_DATA}}</data> <instructions> 1. 包括以下部分：收入增长、利润率、现金流。 2. 突出优势和需要改进的领域。 </instructions> 使您的语气简洁专业。遵循此结构：<formatting_example>{{Q1_REPORT}}</formatting_example> |
| 助手 | AcmeCorp 投资者第二季度财务报告 尊敬的各位投资者： 我很高兴向您呈报我们第二季度的财务报告，展示 AcmeCorp 在 B2B SaaS 市场的持续增长和韧性。 1. 收入增长：我们第二季度的收入达到 1520 万美元，同比增长 22%。这一增长主要得益于我们的企业客户群增长了 30%。然而，我们的中小企业部分略有下降 5%，我们计划在第三季度通过有针对性的营销活动来解决这个问题。 2. 利润率：由于基础设施优化，毛利率提高到 72%（比第一季度增长 3%）。然而，由于我们为即将推出的人工智能驱动功能在研发方面投入了大量资金，EBITDA 利润率下降至 18%（下降 2%）。 3. 现金流：经营性现金流保持强劲，为 410 万美元。我们的现金储备为 2800 万美元，按目前的消耗速度可维持 15 个月。我们确实看到客户获取成本增加了 20%，我们正在通过更高效的销售策略来解决这个问题。 总之，AcmeCorp 的核心财务状况依然稳健。我们正在平衡增长投资与审慎的现金管理。我们第三季度的重点将是振兴中小企业增长和优化销售效率。 感谢您一如既往的信任。 顺祝商祺， AcmeCorp 首席财务官 | AcmeCorp 投资者第二季度财务报告</output> 收入增长： - 第二季度收入：1520 万美元（同比增长 22% ↑） - 企业客户：30% ↑ - 中小企业部分：5% ↓ 行动：有针对性的第三季度营销 利润率： - 毛利率：72%（比第一季度增长 3% ↑） 原因：基础设施优化 - EBITDA 利润率：18%（下降 2% ↓） 原因：对人工智能功能的研发投资 现金流： - 经营性现金流：410 万美元（强劲） - 现金储备：2800 万美元（15 个月跑道） - 客户获取成本：20% ↑ 行动：优化销售策略 前景： - 核心财务：稳健 - 第三季度重点：振兴中小企业，优化销售 管理层仍致力于在增长投资与财务纪律之间取得平衡。 |

#### 示例：法律合同分析

没有 XML 标签，Claude 的分析杂乱无章，并且遗漏了要点。有了标签，它提供了结构化、详尽的分析，法律团队可以据此采取行动。

| 角色 | 无 XML 标签 | 有 XML 标签 |
| --- | --- | --- |
| 用户 | 分析此软件许可协议中的潜在风险和责任：{{CONTRACT}}。重点关注赔偿、责任限制和知识产权所有权条款。另外，请注意任何不寻常或令人担忧的条款。这是我们供参考的标准合同：{{STANDARD_CONTRACT}}。为我们的法律团队提供一份调查结果摘要和建议。 | 分析此软件许可协议的法律风险和责任。 我们是一家正在考虑将此协议用于我们核心数据基础设施的跨国企业。 <agreement> {{CONTRACT}}</agreement> 这是我们供参考的标准合同：<standard_contract>{{STANDARD_CONTRACT}}</standard_contract> <instructions> 1. 分析以下条款： - 赔偿 - 责任限制 - 知识产权所有权 2. 注意不寻常或令人担忧的条款。 3. 与我们的标准合同进行比较。 4. 在 `<findings>` 标签中总结调查结果。 5. 在 `<recommendations>` 标签中列出可行的建议。</instructions> |
| 助手 | 所提供的软件许可协议存在几个令人担忧的方面。赔偿条款过于宽泛，可能使我们面临重大责任。责任限制部分将损害赔偿上限定为区区 500 美元，这对于我们的企业级使用来说是不足的。关于知识产权，该协议授予供应商对我们创建的任何修改或集成的共同所有权。 总之，该协议不符合我们的最佳利益。它使我们面临不应有的风险，限制了我们在出现故障时的追索权，并损害了我们的知识产权。我建议重新谈判这些条款或寻找替代供应商。 | <findings> 1. 赔偿（第 8 条）： - 问题：过于宽泛。我们赔偿供应商因我们使用而产生的“任何及所有索赔”。 - 风险：即使是由于供应商的疏忽或产品缺陷，也可能使我们承担责任。 - 偏差：我们的标准将赔偿限制为因我们违反协议而产生的索赔。 2. 责任限制（第 9 条）： - 问题：将所有损害赔偿（包括直接损害赔偿）的上限设为 500 美元。 - 风险：对于企业使用来说严重不足。一次严重的故障可能造成数百万美元的损失。 - 偏差：我们的标准允许直接损害赔偿最高可达已支付费用的 12 个月。 3. 知识产权所有权（第 12 条）： - 问题：授予供应商对我们的修改/集成的共同所有权。 - 风险：供应商可能会使用或出售我们的专有算法或数据见解。 - 偏差：我们的标准保留我们工作的全部所有权。 4. 不寻常的条款： - 第 5.3 条：供应商可以“为任何目的”使用我们的使用数据。 - 第 7.2 条：供应商可以仅凭 7 天通知“为方便起见”终止合同。 - 第 11 条：不提供任何形式的保证，即使是基本的适销性保证。 </findings> <recommendations> 1. 拒绝此协议。对于企业而言，风险远大于收益。 2. 提出反建议： - 赔偿：限制为因我们违反协议而产生的索赔。 - 责任：直接损害赔偿上限为 12 个月的费用；就间接损害进行谈判。 - 知识产权：我们对我们的修改/集成拥有全部所有权。 - 数据使用：仅限于服务改进。 - 终止：至少提前 90 天通知；仅限有原因的终止。 - 保证：要求基本的适销性和特定用途适用性。 3. 如果供应商拒绝，则探索替代供应商或内部解决方案。 4. 鉴于风险较高，请聘请法律顾问进行合同谈判。 </recommendations> |
